<!DOCTYPE html>
<html>

<head>
  <title>Tables</title>
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }
    td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }
    tr:nth-child(even) {
        background-color: #dddddd;
    }
  </style>
</head>

<body>
  <meta charset="UTF-8">
  <table id="tables" style="width:100%"><tbody>
    {% if result %}
      <tr>
        {% for field in result[0] %}
          {% if col_type[field] != 'auto' %}
            <th>{{ field }}</th>
          {% endif %}
        {% endfor %}
      </tr>
      {% for row in result %}
        <tr>
          {% for field in row %}
            {% if col_type[field] != 'auto' %}
              {% if col_type[field] == 'foreign' %}
                <td>{{ named_keys[field][row[field]] }} ({{ row[field] }})</td>
              {% else %}
                <td>{{ row[field] }}</td>
              {% endif %}
            {% endif %}
          {% endfor %}
        </tr>
      {% endfor %}
    {% endif %}
    <form method="POST">
      <tr>
        {% for field in result[0] %}
          {% if col_type[field] != 'auto' %}
            {% if col_type[field] == 'foreign' %}
              <td><select name={{field}}>
                {% for key, name in named_keys[field].items() %}
                  <option value="{{key}}">{{ name }} ({{ key }})</option>
                {% endfor %}
              </select></td>
            {% else %}
              <td><input type="text" name={{field}}></td>
            {% endif %}
          {% endif %}
        {% endfor %}
      </tr>
      <button type="submit" name="submit" value="yes"> Submit </button>
    </form>
  </tbody></table>
</body>

<html>
